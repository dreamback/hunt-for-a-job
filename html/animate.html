<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>Document</title>
    <link rel="stylesheet" href="http://images.zastatic.com/v2/css/global.css">
    <link rel="stylesheet" href="http://images.zastatic.com/v2/css/userGuide_animate.css">
</head>

<body>
    <div class="loading center">
        <p id="loading"></p>
    </div>
    <div id="content">
    	
    </div>
<script type="text/tpl" id="contentTpl">
	<div class="tree">
		<div>
	        <div class="l-branch"></div>
	        <div class="r-branch"></div>

	        <div class="d1"></div>
	        <div class="d2"></div>
	        <div class="d4"></div>
	        <div class="d5"></div>
	        <div class="d6"></div>

	        <div class="t1"></div>
	        <div class="t2"></div>
	        <div class="t3"></div>
        </div>
    </div>
    <div class="btn-wrap">
		<a href="">我也要帮好友找对象</a>
	</div>
</script>
    <script>
    var baseURL = 'http://images.zastatic.com/v2/images/guide/',
        source = ['d1.png', 'd2.png', 'd4.png', 'd5.png', 'd6.png', 'l-branch.png', 'r-branch.png', 't1.png', 't2.png', 't3.png', 'tree.png'];

    function reloadSource(src, currentCallback, endCallbdck) {
        var i = 0;
        len = src.length;
        currentCallback = currentCallback || function() {};
        endCallbdck = endCallbdck || function() {};
        var loadImage = function(url) {
            var img = new Image();
            img.src = url;
            if (img.complete) {
                ++i;
                currentCallback(i, len);
                if (i == len) endCallbdck();
                return;
            }
            img.onload = function() {
                ++i;
                currentCallback(i, len);
                if (i == len) endCallbdck();
            };
        }
        for(var j = 0 ; j < len; j++){
        	loadImage(baseURL+src[j]);
        }
    };
    var loading = document.getElementById('loading');
    reloadSource(source, function(i, sum) {
    		loading.innerHTML = parseInt(i/sum*100)+'%';
    }, function() {
    		loading.className='fadeOut';
    		document.getElementById('content').innerHTML = document.getElementById('contentTpl').innerHTML;
    });
    </script>
</body>

</html>
